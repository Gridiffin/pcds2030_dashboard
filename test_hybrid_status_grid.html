<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Status Grid Test</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom Hybrid Status Grid CSS -->
    <link href="assets/css/components/hybrid-status-grid.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">
                    <i class="fas fa-chart-line me-2"></i>
                    Hybrid Status Grid Test
                </h1>
                
                <div class="alert alert-info">
                    <strong>Testing:</strong> HTML Table + Bootstrap + Sticky Headers + Responsive Design
                </div>
                
                <!-- Status Grid Container -->
                <div id="hybrid_status_grid_test">
                    <div class="hybrid-status-grid">
                        <div class="status-grid-loading">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <div class="mt-2">Loading hybrid status grid...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Hybrid Status Grid Component -->
    <script src="assets/js/components/status-grid.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mock API URL for testing
            const mockApiUrl = 'data:application/json;base64,' + btoa(JSON.stringify({
                success: true,
                data: {
                    initiative: {
                        initiative_id: 1,
                        initiative_name: "Test Initiative for Hybrid Grid",
                        start_date: "2023-01-01",
                        end_date: "2025-12-31"
                    },
                    programs: [
                        {
                            program_id: 1,
                            program_name: "Environmental Conservation Program with Very Long Name to Test Word Wrapping",
                            program_number: "ENV-2023-001",
                            targets: [
                                {
                                    target_number: "T1.1",
                                    target_text: "Reduce carbon emissions by 50% through renewable energy adoption and efficiency improvements",
                                    target_status: "on_target",
                                    outcomes: []
                                },
                                {
                                    target_number: "T1.2", 
                                    target_text: "Implement sustainable waste management systems across all facilities",
                                    target_status: "at_risk",
                                    outcomes: []
                                }
                            ]
                        },
                        {
                            program_id: 2,
                            program_name: "Education Enhancement Initiative",
                            program_number: "EDU-2023-002",
                            targets: [
                                {
                                    target_number: "T2.1",
                                    target_text: "Improve literacy rates in rural areas by 25%",
                                    target_status: "completed",
                                    outcomes: []
                                },
                                {
                                    target_number: "T2.2",
                                    target_text: "Deploy digital learning platforms to 500 schools",
                                    target_status: "off_target",
                                    outcomes: []
                                },
                                {
                                    target_number: "T2.3",
                                    target_text: "Train 1000 teachers in modern pedagogical methods and digital tools integration",
                                    target_status: "not_started",
                                    outcomes: []
                                }
                            ]
                        },
                        {
                            program_id: 3,
                            program_name: "Healthcare Access Program",
                            program_number: "HEALTH-2023-003",
                            targets: [
                                {
                                    target_number: "T3.1",
                                    target_text: "Establish 50 new primary healthcare centers in underserved communities",
                                    target_status: "planned",
                                    outcomes: []
                                }
                            ]
                        },
                        {
                            program_id: 4,
                            program_name: "Digital Infrastructure Development Program",
                            program_number: "TECH-2023-004",
                            targets: [
                                {
                                    target_number: "T4.1",
                                    target_text: "Deploy high-speed internet to 200 rural communities",
                                    target_status: "on_target",
                                    outcomes: []
                                },
                                {
                                    target_number: "T4.2",
                                    target_text: "Establish 50 digital service centers nationwide",
                                    target_status: "at_risk",
                                    outcomes: []
                                }
                            ]
                        },
                        {
                            program_id: 5,
                            program_name: "Economic Development and Job Creation Initiative",
                            program_number: "ECON-2023-005",
                            targets: [
                                {
                                    target_number: "T5.1",
                                    target_text: "Create 10,000 new jobs through small business support programs",
                                    target_status: "completed",
                                    outcomes: []
                                },
                                {
                                    target_number: "T5.2",
                                    target_text: "Establish microfinance programs in 100 communities",
                                    target_status: "off_target",
                                    outcomes: []
                                },
                                {
                                    target_number: "T5.3",
                                    target_text: "Launch entrepreneurship training for 5,000 individuals",
                                    target_status: "not_started",
                                    outcomes: []
                                }
                            ]
                        },
                        {
                            program_id: 6,
                            program_name: "Food Security and Agriculture Modernization Program",
                            program_number: "AGR-2023-006",
                            targets: [
                                {
                                    target_number: "T6.1",
                                    target_text: "Increase crop yield by 30% through modern farming techniques",
                                    target_status: "on_target",
                                    outcomes: []
                                },
                                {
                                    target_number: "T6.2",
                                    target_text: "Distribute improved seeds to 50,000 farmers",
                                    target_status: "completed",
                                    outcomes: []
                                }
                            ]
                        }
                    ]
                }
            }));
            
            // Initialize the hybrid status grid
            const hybridGrid = new StatusGrid('hybrid_status_grid_test', mockApiUrl);
            
            // Store reference globally for debugging
            window.hybridGrid = hybridGrid;
            
            console.log('Hybrid Status Grid initialized with test data');
        });
    </script>
</body>
</html>
