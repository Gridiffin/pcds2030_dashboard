<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outcomes Edit Feature Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="alert alert-info">
                    <h4><i class="fas fa-test-tube me-2"></i>Outcomes Edit Feature Test</h4>
                    <p>This page tests the enhanced outcomes editing functionality:</p>
                    <ul>
                        <li>✅ Inline editing of column names (click on column headers)</li>
                        <li>✅ Data preservation when adding/removing columns</li>
                        <li>✅ Enhanced UI with better sizing and styling</li>
                        <li>✅ Improved user feedback and validation</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Monthly Outcomes Edit Test</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <button type="button" class="btn btn-primary" id="testAddColumnBtn">
                                <i class="fas fa-plus me-1"></i> Add Test Column
                            </button>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-bordered table-hover metrics-table">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width: 150px;">Month</th>
                                        <th>
                                            <div class="metric-header">
                                                <div class="metric-title editable-hint" contenteditable="true" data-column="Test Column 1">Test Column 1</div>
                                                <div class="metric-actions">
                                                    <button type="button" class="btn btn-sm btn-danger delete-column-btn" data-column="Test Column 1" title="Delete column">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </th>
                                        <th>
                                            <div class="metric-header">
                                                <div class="metric-title editable-hint" contenteditable="true" data-column="Test Column 2">Test Column 2</div>
                                                <div class="metric-actions">
                                                    <button type="button" class="btn btn-sm btn-danger delete-column-btn" data-column="Test Column 2" title="Delete column">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="month-badge">January</span></td>
                                        <td><div class="metric-cell editable-hint" contenteditable="true" data-column="Test Column 1" data-month="January">100</div></td>
                                        <td><div class="metric-cell editable-hint" contenteditable="true" data-column="Test Column 2" data-month="January">200</div></td>
                                    </tr>
                                    <tr>
                                        <td><span class="month-badge">February</span></td>
                                        <td><div class="metric-cell editable-hint" contenteditable="true" data-column="Test Column 1" data-month="February">150</div></td>
                                        <td><div class="metric-cell editable-hint" contenteditable="true" data-column="Test Column 2" data-month="February">250</div></td>
                                    </tr>
                                    <tr>
                                        <td><span class="month-badge">March</span></td>
                                        <td><div class="metric-cell editable-hint" contenteditable="true" data-column="Test Column 1" data-month="March">175</div></td>
                                        <td><div class="metric-cell editable-hint" contenteditable="true" data-column="Test Column 2" data-month="March">300</div></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-3">
                            <div class="alert alert-success">
                                <h6>Testing Instructions:</h6>
                                <ol>
                                    <li>Click on any column header to edit the name</li>
                                    <li>Click on any data cell to edit the value</li>
                                    <li>Try adding a new column with the button above</li>
                                    <li>Try deleting a column with the red trash button</li>
                                    <li>Notice how data is preserved during operations</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Test JavaScript -->
    <script>
        // Test data structure
        let testColumns = ['Test Column 1', 'Test Column 2'];
        let testData = {
            'January': { 'Test Column 1': 100, 'Test Column 2': 200 },
            'February': { 'Test Column 1': 150, 'Test Column 2': 250 },
            'March': { 'Test Column 1': 175, 'Test Column 2': 300 }
        };
        
        // Test functionality
        document.getElementById('testAddColumnBtn').addEventListener('click', function() {
            const columnName = prompt('Enter test column name:', 'New Test Column');
            if (columnName && columnName.trim()) {
                // Simulate the enhanced add column functionality
                console.log(`Adding column: ${columnName}`);
                alert(`Column "${columnName}" would be added with enhanced functionality!`);
            }
        });
        
        // Test edit functionality
        document.querySelectorAll('.metric-title').forEach(title => {
            title.addEventListener('input', function() {
                console.log(`Column renamed to: ${this.textContent}`);
            });
        });
        
        document.querySelectorAll('.metric-cell').forEach(cell => {
            cell.addEventListener('input', function() {
                console.log(`Cell value changed: ${this.textContent} for ${this.dataset.column} - ${this.dataset.month}`);
            });
        });
        
        document.querySelectorAll('.delete-column-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const columnName = this.dataset.column;
                if (confirm(`Delete column "${columnName}"? This is just a test.`)) {
                    alert(`Column "${columnName}" would be deleted with data preservation!`);
                }
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
